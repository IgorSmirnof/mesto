 126 ------ document.addEventListener("keydown", (e) => { 
Установка, а также удаление данного слушателя, должны осуществляться при открытии и закрытии попапа соответственно, чтобы в ситуации, когда ни один попап не открыт, клик по документу не вызывал лишний раз данное событие.
Следовательно установку данного слушателя следует перенести в функцию openPopup, а удаление в closePopup.
Для этого необходимо создать отдельную функцию закрытия эскейпом:
function closeByEsc(evt) {
    if (evt.key === "Escape") {
      const openedPopup = document.querySelector('.popup_opened');
      closePopup(openedPopup); 
    }
} 
Тогда установка слушателя будет осуществляться таким образом:
document.addEventListener('keydown',  closeByEsc)
Удаление - аналогично.





